<section class="reservas" id="reservas">
  <div class="reservas__bg"></div>
  <div class="container">
    <div class="reservas__inner">

      <!-- Left: info -->
      <div class="reservas__info" data-aos="fade-right" data-aos-duration="1000">
        <p class="section-label">Reservas</p>
        <h2 class="section-title reservas__title">
          Asegura tu mesa esta noche
        </h2>
        <p class="section-subtitle reservas__desc">
          CumpleaÃ±os, aniversarios, reuniones de negocios o simplemente una noche especial.
          Reserva en minutos y llega a disfrutar.
        </p>

        <ul class="reservas__perks">
          <li><span class="reservas__perk-icon">âœ“</span> ConfirmaciÃ³n inmediata por email</li>
          <li><span class="reservas__perk-icon">âœ“</span> CancelaciÃ³n sin cargo hasta 24hs antes</li>
          <li><span class="reservas__perk-icon">âœ“</span> Opciones para celÃ­acos y veganos</li>
          <li><span class="reservas__perk-icon">âœ“</span> DecoraciÃ³n especial para celebraciones</li>
        </ul>

        <div class="reservas__contact">
          <a href="https://wa.me/542494210572" target="_blank" class="reservas__contact-link">
            ðŸ“ž &nbsp; +54 249 421-0572
          </a>
        </div>
      </div>

      <!-- Right: form -->
      <div class="reservas__form-wrap" data-aos="fade-left" data-aos-delay="100" data-aos-duration="1000">

        @if (!submitted()) {
          <form class="reservas__form" [formGroup]="form" (ngSubmit)="onSubmit()">
            <div class="form-row">
              <div class="form-group" [class.has-error]="isInvalid('nombre')">
                <label for="nombre">Nombre completo *</label>
                <input id="nombre" type="text" formControlName="nombre" placeholder="Tu nombre">
                @if (isInvalid('nombre')) {
                  <span class="form-error">Ingresa tu nombre (mÃ­n. 2 caracteres)</span>
                }
              </div>
              <div class="form-group" [class.has-error]="isInvalid('email')">
                <label for="email">Email *</label>
                <input id="email" type="email" formControlName="email" placeholder="tu@email.com">
                @if (isInvalid('email')) {
                  <span class="form-error">Email invÃ¡lido</span>
                }
              </div>
            </div>

            <div class="form-row">
              <div class="form-group" [class.has-error]="isInvalid('telefono')">
                <label for="telefono">TelÃ©fono *</label>
                <input id="telefono" type="tel" formControlName="telefono" placeholder="+54 9 11...">
                @if (isInvalid('telefono')) {
                  <span class="form-error">TelÃ©fono invÃ¡lido</span>
                }
              </div>
              <div class="form-group" [class.has-error]="isInvalid('personas')">
                <label for="personas">Personas *</label>
                <select id="personas" formControlName="personas">
                  <option value="" disabled>Seleccionar</option>
                  @for (p of personas; track p) {
                    <option [value]="p">{{ p }}</option>
                  }
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group" [class.has-error]="isInvalid('fecha')">
                <label for="fecha">Fecha *</label>
                <input id="fecha" type="date" formControlName="fecha">
              </div>
              <div class="form-group" [class.has-error]="isInvalid('horario')">
                <label for="horario">Horario *</label>
                <select id="horario" formControlName="horario">
                  <option value="" disabled>Seleccionar</option>
                  @for (h of horarios; track h) {
                    <option [value]="h">{{ h }}</option>
                  }
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="comentarios">Comentarios especiales</label>
              <textarea id="comentarios" formControlName="comentarios" rows="3" placeholder="Alergias, celebraciÃ³n especial, decoraciÃ³n..."></textarea>
            </div>

            <button type="submit" class="reservas__submit btn-primary" [disabled]="loading()">
              @if (loading()) {
                <span class="reservas__loader"></span>
                Procesandoâ€¦
              } @else {
                Confirmar Reserva
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
              }
            </button>
          </form>
        } @else {
          <div class="reservas__success">
            <div class="reservas__success-icon">ðŸŽ‰</div>
            <h3>Â¡Reserva confirmada!</h3>
            <p>Te enviamos un email de confirmaciÃ³n. Â¡Te esperamos con la mesa lista!</p>
            <button class="btn-primary" (click)="reset()">Hacer otra reserva</button>
          </div>
        }
      </div>
    </div>
  </div>
</section>
